{"title":"JS拖放元素实例","uid":"b173c4f9e5cd10dcea20e20af9d5faca","slug":"JS拖放元素实例","date":"2014-07-04T08:18:53.000Z","updated":"2015-06-24T01:43:11.000Z","comments":true,"path":"api/articles/JS拖放元素实例.json","cover":null,"content":"<p>结合网上例子加Javascript 权威指南第6版 做得DEMO。考了了IE兼容性问题，不过IE早晚淘汰的玩意儿。</p>\n<span id=\"more\"></span>\n\n<pre><code>&lt;!docType html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n    &lt;style type=&quot;text/css&quot;&gt;\n    body&#123;\n    margin: 0;\n    padding: 0;\n    &#125;\n#drag &#123;\n    border: 1px solid blue;\n    width: 100px;\n    height: 100px;\n    position: absolute;\n    &#125;\n    &lt;/style&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n\n    &lt;div class=&quot;wrap&quot; style=&quot;width: 400px;height: 400px;border: 1px solid darkblue;margin-          top: 40px;position: relative&quot;&gt;\n    &lt;div id=&quot;drag&quot;&gt;&lt;/div&gt;\n    &lt;/div&gt;\n\n\n    &lt;script&gt;\n    var drag = document.getElementById(&#39;drag&#39;);\n    var wrap = document.getElementsByClassName(&#39;wrap&#39;)[0];\n    var inputX = document.getElementById(&#39;x&#39;);\n    var inputY = document.getElementById(&#39;y&#39;);\n    if (document.attachEvent) &#123;\n    drag.attachEvent(&#39;onmousedown&#39;, dragHandle);\n&#125; else &#123;\n    drag.addEventListener(&#39;mousedown&#39;, dragHandle, false);\n    &#125;\n    function dragHandle(event) &#123;\n    var event = event || window.event;\n    var startX = drag.offsetLeft;\n    var startY = drag.offsetTop;\n    var mouseX = event.clientX;\n    var mouseY = event.clientY;\n\n    var deltaX = mouseX - startX;\n    var deltaY = mouseY - startY;\n\n\n    if (document.attachEvent) &#123;\n    drag.attachEvent(&#39;onmousemove&#39;, moveHandle);\n    drag.attachEvent(&#39;onmouseup&#39;, upHandle);\n    drag.attachEvent(&#39;onlosecapture&#39;, upHandle);\n    drag.setCapture();\n    &#125; else &#123;\ndocument.addEventListener(&#39;mousemove&#39;, moveHandle, true);\n    document.addEventListener(&#39;mouseup&#39;, upHandle, true);\n   &#125;\n    function moveHandle(event) &#123;\n    var event = event || window.event;\n\n   var iL = event.clientX - deltaX;\n    var iT = event.clientY - deltaY;\n\n    var maxL = wrap.clientWidth - drag.offsetWidth;\n    var maxT = wrap.clientHeight - drag.offsetHeight;\n    iL = iL &lt; 0 ? 0 : iL;\n    iL = iL &gt; maxL ? maxL : iL;\n    iT = iT &lt; 0 ? 0 : iT;\n    iT = iT &gt; maxT ? maxT : iT;\n\n    drag.style.left = iL + &quot;px&quot;;\n    drag.style.top = iT + &quot;px&quot;;\n\n&#125;\n\n    function upHandle() &#123;\n    if (document.attachEvent) &#123;\n    drag.detachEvent(&#39;onmousemove&#39;, moveHandle);\n    drag.detachEvent(&#39;onmouseup&#39;, upHandle);\n    drag.detachEvent(&#39;onlosecapture&#39;, upHandle);\n    drag.releaseCapture();\n    &#125; else &#123;\n    document.removeEventListener(&#39;mousemove&#39;, moveHandle, true);\n    document.removeEventListener(&#39;mouseup&#39;, upHandle, true);\n    &#125;\n    &#125;\n\n    &#125;\n    &lt;/script&gt;\n    /body&gt;\n    &lt;/html&gt;</code></pre>\n","feature":null,"text":"结合网上例子加Javascript 权威指南第6版 做得DEMO。考了了IE兼容性问题，不过IE早晚淘汰的玩意儿。 &lt;!docType html&gt; &lt;html&gt; &lt;head&gt; &lt;style type=&quot;text/css&quot...","link":"","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"技术","slug":"技术","count":7,"path":"api/categories/技术.json"}],"tags":[{"name":"JS DOM","slug":"JS-DOM","count":3,"path":"api/tags/JS-DOM.json"}],"toc":"","author":{"name":"Lu-ckYoung","slug":"blog-author","avatar":"/img/touxiang.png","link":"","description":"API调用者，轮子搬运工，理论CV开发者，智慧意味着自知无知","socials":{}},"mapped":true,"prev_post":{"title":"JS DOM标准事件的三个阶段","uid":"5de1032283da4a68ad814ae1c25fb259","slug":"JS-DOM标准事件的三个阶段","date":"2014-08-22T03:29:30.000Z","updated":"2021-04-06T09:12:38.145Z","comments":true,"path":"api/articles/JS-DOM标准事件的三个阶段.json","cover":[],"text":"#事件阶段1（Event Phases）当一个DOM事件呗触发时，它不是在触发的对象上只触发一次的，而是经历三个阶段。分别为1：一开始从文档的根节点流向目标对象（捕获阶段），2：然后在目标对向上被触发（目标阶段），3：之后再回溯到文档的根节点（冒泡阶段）.如图： （图片来源：W3...","link":"","photos":[],"count_time":{"symbolsCount":868,"symbolsTime":"1 mins."},"categories":[{"name":"技术","slug":"技术","count":7,"path":"api/categories/技术.json"}],"tags":[{"name":"JS DOM","slug":"JS-DOM","count":3,"path":"api/tags/JS-DOM.json"}],"author":{"name":"Lu-ckYoung","slug":"blog-author","avatar":"/img/touxiang.png","link":"","description":"API调用者，轮子搬运工，理论CV开发者，智慧意味着自知无知","socials":{}}},"next_post":{}}